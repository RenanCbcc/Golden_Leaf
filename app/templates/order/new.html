{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block page_content %}

<div class="col-md-4 col-md-offset-4">
    <h2 class="titulo-principal">Dados do novo pedido</h2>
    <form action="" method="POST">
        {{ form.hidden_tag() }}
        {{ wtf.quick_form(form) }}
    </form>

    <script>
        var category_select = document.getElementById("category");
        var product_select = document.getElementById("product");
        category_select.onchange = function()  {

            category_id = category_select.value;


            fetch('/product/category/' + category_id).then(function(response) {
                response.json().then(function(data) {
                    var option = '';
                    for (var product of data.products) {
                        option += '<option value="' + product.id + '">' + product.description + '</option>';
                    }
                    product_select.innerHTML = option;
                })

            });
        }

    </script>
</div>
{% endblock %}